<!DOCTYPE html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<style>
body {background-color: powderblue;}
h1   {color: blue;}
p    {color: black;}
input:checked + div { display:none; }
.node {color:red;}
li {
    background-color: transparent;
    list-style-position: outside;
    list-style-type: circle;
    color: red;
}
.hidden{ display:none; }

</style>
</head>
<body>

<h1>This is a heading</h1>
<div>
    <input id="name"
            class="form-control" 
            type="text" 
            value="test-name"
            placeholder="Input Your Name Here">    
</div>

<hr>
<ul id="week-all"> </ul>
<hr>
<ul id="week-10"> </ul>
<hr>
<ul id="week-11"> </ul>
<hr>
                
<input type="file" id="file-input" />
<h3>Contents of the file:</h3>
<pre id="file-content"></pre>


<p>

</p>

<script>
    var user_name = document.getElementById("name");


function readSingleFile(e) {
  var file = e.target.files[0];
    console.log( file )
  if (!file) {
    return;
  }
  var reader = new FileReader();
  reader.onload = function(e) {
      console.log('e.target.result')
    var contents = e.target.result;
    displayContents(contents,file.name);
  };
  reader.readAsText(file);
}

function displayContents(contents,name) {
  var element = document.getElementById('file-content');
    depth = 1;
    tag = name.replace(".txt","")
    console.log("post " + tag)
    thisUL = $("#"+tag);
    
    contents.split("\n").forEach(function(item){
        level = item.split(' ')[0].length;
        // console.log( level + " : " + item );
            if(item.substring(0,1) == "."){

                if( level > depth){
                    newul = document.createElement("UL");
                    $(newul).addClass("hidden")
                    $(thisUL).append( newul )
                    thisUL= newul;
                    depth = level;
                }
                while( level < depth ){
                    console.log( "go up for " + item)
                    thisUL = $(thisUL).parent();
                    depth--
                }
                if( level == depth){
                    clean = item.replace(/^\W*\./,'')
                    $(thisUL).append( '<li class="node"> ' + clean + '</li>')
                }
            }else{
                console.log('no dot :' + item.length);
                //console.log( item );
            }
    });
    $(".node").click(function(){
        eThis = $(event.srcElement);
        eNext = $(event.srcElement).next().first();
        $(eNext).toggle()
    })
}

document.getElementById('file-input')
  .addEventListener('change', readSingleFile, false);

    $(document).ready(function(){ 
    $(".node").click(function(){
        eThis = $(event.srcElement);
        eNext = $(event.srcElement).next().first();
        $(eNext).toggle()
    })

    });


</script>
</body>
</html>